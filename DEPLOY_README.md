# Hexo 博客部署脚本使用说明

## deploy.py - 自动部署脚本

### 功能
这个 Python 脚本可以自动完成以下操作：
1. 清理 Hexo 缓存 (`hexo clean`)
2. 生成静态文件 (`hexo generate`)
3. 部署到 GitHub Pages (`hexo deploy`)
4. 检查 Git 状态
5. 提交源代码改动 (`git add`, `git commit`, `git push`)

### 使用方法

#### 方法 1: 直接运行（推荐）
```bash
python3 deploy.py
```

或者（如果已添加执行权限）：
```bash
./deploy.py
```

#### 方法 2: 使用 Python 解释器
```bash
python deploy.py
```

### 运行流程

1. **自动执行 Hexo 部署**
   - 脚本会自动清理、生成、部署
   - 每个步骤都会显示详细输出
   
2. **输入提交信息**
   - 部署完成后，脚本会提示你输入 Git 提交信息
   - 如果直接按回车，会使用默认信息（包含时间戳）
   - 例如：`更新博客内容 - 2025-12-04 10:30:45`

3. **自动提交推送**
   - 自动执行 `git add .`
   - 提交改动到本地仓库
   - 推送到 GitHub 远程仓库

### 特性

✅ **跨平台支持**：Windows, macOS, Linux 均可使用  
✅ **实时输出**：所有命令的输出都会实时显示  
✅ **错误处理**：每一步都有错误检测，失败时会提示  
✅ **智能检测**：只有在有改动时才会提交  
✅ **用户友好**：清晰的进度提示和 Emoji 图标  
✅ **中断保护**：可以随时按 Ctrl+C 安全退出  

### 示例输出

```
🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟
     Hexo 博客自动部署脚本
🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟

📂 工作目录: /Users/lzorn/blog

============================================================
🚀 清理 Hexo 缓存
============================================================
INFO  Deleted database.
INFO  Deleted public folder.
✅ 清理 Hexo 缓存 - 成功

============================================================
🚀 生成静态文件
============================================================
INFO  Files loaded in 144 ms
INFO  Generated: 57 files
✅ 生成静态文件 - 成功

============================================================
🚀 部署到 GitHub Pages
============================================================
INFO  Deploy done: git
✅ 部署到 GitHub Pages - 成功

============================================================
📝 请输入 Git 提交信息 (直接回车使用默认信息):
============================================================
提交信息: 添加新文章

============================================================
✅ 所有操作完成！
🌐 博客地址: https://lzorn-lzorn.github.io
📦 源代码: https://github.com/lzorn-lzorn/blog
============================================================
```

### 注意事项

1. **确保在博客根目录**：脚本会自动切换到脚本所在目录
2. **需要 Python 3**：确保已安装 Python 3.x
3. **需要 Hexo 和 Git**：确保已正确安装和配置
4. **SSH 认证**：确保 Git 的 SSH 密钥已配置

### 快捷方式（可选）

可以在 `.zshrc` 或 `.bashrc` 中添加别名：

```bash
# 添加到 ~/.zshrc
alias blog-deploy="cd ~/blog && python3 deploy.py"
```

然后在任何目录下都可以运行：
```bash
blog-deploy
```

### 与原有脚本的比较

| 功能           | deploy.py           | random-deploy.sh |
| -------------- | ------------------- | ---------------- |
| Hexo 部署      | ✅                   | ✅                |
| Git 提交推送   | ✅                   | ❌                |
| 跨平台         | ✅ Windows/Mac/Linux | ⚠️ Mac/Linux only |
| 随机背景       | ❌                   | ✅                |
| 交互式提交信息 | ✅                   | ❌                |
| 错误处理       | ✅ 详细              | ⚠️ 基础           |

### 故障排除

**问题 1**: `python3: command not found`
- **解决**: 使用 `python deploy.py` 或安装 Python 3

**问题 2**: `hexo: command not found`
- **解决**: 运行 `npm install -g hexo-cli`

**问题 3**: Permission denied
- **解决**: 运行 `chmod +x deploy.py`

**问题 4**: Git 推送失败
- **解决**: 检查 SSH 密钥配置或网络连接

### 进阶用法

如果你想在部署时也随机更换背景，可以结合使用：

```bash
# 先运行随机背景脚本，再运行部署脚本
node random-deploy.js && python3 deploy.py
```

或者创建一个组合脚本 `deploy-all.sh`：
```bash
#!/bin/bash
echo "🎨 随机选择背景..."
node random-deploy.js
echo "🚀 开始部署..."
python3 deploy.py
```
